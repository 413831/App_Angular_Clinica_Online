!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/fire"),require("firebase/app"),require("@angular/common")):"function"==typeof define&&define.amd?define("@angular/fire/remote-config",["exports","@angular/core","rxjs","rxjs/operators","@angular/fire","firebase/app","@angular/common"],t):t(((e=e||self).angular=e.angular||{},e.angular.fire=e.angular.fire||{},e.angular.fire["remote-config"]={}),e.ng.core,e.rxjs,e.rxjs.operators,e.angular.fire,e.firebase,e.ng.common)}(this,(function(e,t,n,r,o,i,u){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u}function s(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}var p=new t.InjectionToken("angularfire2.remoteConfig.settings"),l=new t.InjectionToken("angularfire2.remoteConfig.defaultConfig"),g=function(){function e(e,t){this._source=e,this._value=t}return e.prototype.asBoolean=function(){return["1","true","t","y","yes","on"].indexOf(this._value.toLowerCase())>-1},e.prototype.asString=function(){return this._value},e.prototype.asNumber=function(){return Number(this._value)||0},e.prototype.getSource=function(){return this._source},e}();var y=function(e){function t(t,n,r,o){var i=e.call(this,r,o)||this;return i.key=t,i.fetchTimeMillis=n,i}return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(g);var d=function(e){return r.filter((function(t){return Array.isArray(t)?t.some(e):e(t)}))},m=function(){function e(e,t,i,a,f,p){this.zone=f;var l=new o["ɵAngularFireSchedulers"](f),y=n.of(void 0).pipe(r.observeOn(l.outsideAngular),r.switchMap((function(){return u.isPlatformBrowser(p)?import("firebase/remote-config"):n.empty()})),r.map((function(){return o["ɵfirebaseAppFactory"](e,f,t)})),r.map((function(e){return e.remoteConfig()})),r.tap((function(e){i&&(e.settings=i),a&&(e.defaultConfig=a)})),r.startWith(void 0),r.shareReplay({bufferSize:1,refCount:!1})),d=y.pipe(r.filter((function(e){return!!e}))),m=n.of(Object.keys(a||{}).reduce((function(e,t){var n;return c(c({},e),((n={})[t]=new g("default",a[t].toString()),n))}),{})),b=r.map((function(e){return Object.keys(e).filter((function(t){return"default"!=e[t].getSource()})).reduce((function(t,n){var r;return c(c({},t),((r={})[n]=e[n],r))}),{})})),v=d.pipe(r.switchMap((function(e){return e.activate().then((function(){return e.ensureInitialized()})).then((function(){return e.getAll()}))})),b),j=d.pipe(r.switchMap((function(e){return f.runOutsideAngular((function(){return e.fetchAndActivate().then((function(){return e.ensureInitialized()})).then((function(){return e.getAll()}))}))})),b);return this.parameters=n.concat(m,v,j).pipe(h(y),r.shareReplay({bufferSize:1,refCount:!0})),this.changes=this.parameters.pipe(r.switchMap((function(e){return n.of.apply(void 0,s(e))})),r.groupBy((function(e){return e.key})),r.mergeMap((function(e){return e.pipe(r.distinctUntilChanged())}))),this.strings=A(this.parameters,"strings"),this.booleans=A(this.parameters,"booleans"),this.numbers=A(this.parameters,"numbers"),o["ɵlazySDKProxy"](this,d,f)}return e.decorators=[{type:t.Injectable,args:[{providedIn:"any"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[o.FIREBASE_OPTIONS]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[o.FIREBASE_APP_NAME]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[p]}]},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[l]}]},{type:t.NgZone},{type:Object,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]}]},e.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new e(t["ɵɵinject"](o.FIREBASE_OPTIONS),t["ɵɵinject"](o.FIREBASE_APP_NAME,8),t["ɵɵinject"](p,8),t["ɵɵinject"](l,8),t["ɵɵinject"](t.NgZone),t["ɵɵinject"](t.PLATFORM_ID))},token:e,providedIn:"any"}),e}();var h=function(e){return n.pipe(r.withLatestFrom(e),r.scan((function(e,t){var n=f(t,2),r=n[0],o=n[1];return s(e.map((function(e){return e.key})),Object.keys(r)).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(t){var n=r[t];return n?new y(t,o?o.fetchTimeMillis:-1,n.getSource(),n.asString()):e.find((function(e){return e.key===t}))}))}),[]))},b={strings:"asString",numbers:"asNumber",booleans:"asBoolean"},v={numbers:0,booleans:!1,strings:void 0},j=function(e){return function(t){return new n.Observable((function(n){var r=!1,o=setTimeout((function(){n.complete(),r=!0}),e);return t.subscribe({next:function(e){r||n.next(e)},error:function(e){r||(clearTimeout(o),n.error(e))},complete:function(){r||(clearTimeout(o),n.complete())}})}))}},O=function(e){switch(typeof e){case"string":return"asString";case"boolean":return"asBoolean";case"number":return"asNumber";default:return"asString"}};function S(e){return void 0===e&&(e="strings"),n.pipe(r.map((function(t){return t.reduce((function(t,n){var r;return c(c({},t),((r={})[n.key]="object"==typeof e?n[O(e[n.key])]():n[b[e]](),r))}),"object"==typeof e?e:{})})),r.distinctUntilChanged((function(e,t){return JSON.stringify(e)===JSON.stringify(t)})))}var A=function(e,t){return new Proxy(e.pipe(S(t)),{get:function(n,o){return n[o]||e.pipe(r.map((function(e){return e.find((function(e){return e.key===o}))})),r.map((function(e){return e?e[b[t]]():v[t]})),r.distinctUntilChanged())}})},_=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{providers:[m]}]}],e}();e.AngularFireRemoteConfig=m,e.AngularFireRemoteConfigModule=_,e.DEFAULTS=l,e.Parameter=y,e.SETTINGS=p,e.Value=g,e.budget=j,e.filterFresh=function(e){return d((function(t){return t.fetchTimeMillis+e>=(new Date).getTime()}))},e.filterRemote=function(){return d((function(e){return"remote"===e.getSource()}))},e.mapToObject=S,e.scanToObject=function(e){return void 0===e&&(e="strings"),n.pipe(r.scan((function(t,n){var r;return c(c({},t),((r={})[n.key]="object"==typeof e?n[O(e[n.key])]():n[b[e]](),r))}),"object"==typeof e?e:{}),r.debounceTime(1),j(10),r.distinctUntilChanged((function(e,t){return JSON.stringify(e)===JSON.stringify(t)})))},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-fire-remote-config.umd.min.js.map