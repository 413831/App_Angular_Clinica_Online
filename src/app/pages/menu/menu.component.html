<div class="page">
    <h1><p class="titulos">Menú de usuario</p></h1>
    <hr>
    <div *ngIf='usuario'>

        <mat-grid-list cols="6" rowHeight="90px">
            <mat-grid-tile [colspan]=4 [rowspan]=4 class="detalle">
                <mat-grid-tile-header>Datos personales</mat-grid-tile-header>
                <div *ngIf='paciente'>
                    <app-detalle-paciente *ngIf='paciente' class="detalle" [imgPerfil]='imgPerfil'
                        [paciente]='paciente'></app-detalle-paciente>
                </div>
                <div *ngIf='medico'>
                    <app-detalle-medico class="detalle" [imgPerfil]='imgPerfil' [medico]='medico'></app-detalle-medico>
                </div>
                <div *ngIf='administrador'>
                    <app-detalle-administrador class="detalle" [administrador]="administrador">
                    </app-detalle-administrador>
                </div>
            </mat-grid-tile>

            <mat-grid-tile class="tabla" *ngIf='paciente || medico' [colspan]=2 [rowspan]=4 >
                <mat-grid-tile-header>Turnos</mat-grid-tile-header>
                <mat-table [dataSource]="dataTurnos" class="mat-elevation-z8 frame">
             
                    <ng-container matColumnDef="especialidad">
                        <mat-header-cell *matHeaderCellDef> Especialidad </mat-header-cell>
                        <mat-cell *matCellDef="let turno"> {{turno.especialidad}} </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="estado">
                        <mat-header-cell *matHeaderCellDef> Estado </mat-header-cell>
                        <mat-cell *matCellDef="let turno"> {{turno.estado}} </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="fecha">
                        <mat-header-cell *matHeaderCellDef> Fecha </mat-header-cell>
                        <mat-cell *matCellDef="let turno"> {{turno.fecha}} </mat-cell>
                    </ng-container>

                    <mat-header-row *matHeaderRowDef="columnasTurnos"></mat-header-row>
                    <mat-row (click)="seleccionarTurno(row)" class="example-element-row" *matRowDef="let row; columns: columnasTurnos;"></mat-row>
                </mat-table>
            </mat-grid-tile>

            <mat-grid-tile *ngIf='administrador' [colspan]=2 [rowspan]=4 class="table">
                <!-- <app-listado-medicos (enviarMedico)='seleccionarMedico($event)'></app-listado-medicos> -->
                <mat-grid-tile-header *ngIf="mostrarMedicos">Listado de medicos</mat-grid-tile-header>
                <mat-table *ngIf="mostrarMedicos" [dataSource]="dataMedicos" class="mat-elevation-z8 frame">

                    <ng-container matColumnDef="nombre">
                        <mat-header-cell *matHeaderCellDef> Nombre </mat-header-cell>
                        <mat-cell *matCellDef="let medico"> {{medico.nombre}} </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="matricula">
                        <mat-header-cell *matHeaderCellDef> Matricula </mat-header-cell>
                        <mat-cell *matCellDef="let medico"> {{medico.matricula}} </mat-cell>
                    </ng-container>

                    <mat-header-row *matHeaderRowDef="columnasMedicos"></mat-header-row>
                    <mat-row (click)="seleccionarMedico(row)" class="example-element-row"
                        *matRowDef="let row; columns: columnasMedicos;"></mat-row>
                </mat-table>
                <mat-grid-tile-header *ngIf="mostrarPacientes">Listado de pacientes</mat-grid-tile-header>
                <mat-table *ngIf="mostrarPacientes" [dataSource]="dataPacientes" class="mat-elevation-z8 frame">

                    <ng-container matColumnDef="nombre">
                        <mat-header-cell *matHeaderCellDef> Nombre </mat-header-cell>
                        <mat-cell *matCellDef="let paciente"> {{paciente.nombre}} </mat-cell>
                    </ng-container>

                    <ng-container matColumnDef="afiliado">
                        <mat-header-cell *matHeaderCellDef> Nro Afiliado </mat-header-cell>
                        <mat-cell *matCellDef="let paciente"> {{paciente.numeroAfiliado}} </mat-cell>
                    </ng-container>

                    <mat-header-row *matHeaderRowDef="columnasPacientes"></mat-header-row>
                    <mat-row class="example-element-row" *matRowDef="let row; columns: columnasPacientes;"></mat-row>
                </mat-table>
            </mat-grid-tile>

        </mat-grid-list>
        <mat-toolbar>
            <div class="botones" *ngIf='administrador'>
                <button mat-raised-button color="primary" (click)="autorizar()">Autorizar</button>
                <button mat-raised-button color="primary" (click)="listarMedicos()">Ver Medicos</button>
                <button mat-raised-button color="primary" (click)="listarPacientes()">Ver Pacientes</button>
                <button mat-raised-button color="primary" (click)="listarMedicos()">Ver Medicos</button>
            </div>
            <div *ngIf="turno">
                <button mat-raised-button class="default" (click)="modificarTurno()">Modificar Turno</button>
            </div>
            <div class="botones">
                <button mat-raised-button class="default" (click)="modificar()">Modificar datos</button>                
                <button mat-raised-button class="default" (click)="cargarTurno()">Cargar Turno</button>
                <button mat-raised-button class="default" (click)="logout()">Cerrar Sesion</button>
                <button mat-raised-button class="warning" (click)="borrar()">Baja de usuario</button>
            </div>

        </mat-toolbar>
    </div>
    <div *ngIf='!usuario'>
        <p class="parrafo">Usted no ha iniciado sesión</p>
    </div>
</div>